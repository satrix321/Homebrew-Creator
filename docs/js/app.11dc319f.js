(function(e){function t(t){for(var i,o,a=t[0],l=t[1],c=t[2],p=0,d=[];p<a.length;p++)o=a[p],s[o]&&d.push(s[o][0]),s[o]=0;for(i in l)Object.prototype.hasOwnProperty.call(l,i)&&(e[i]=l[i]);u&&u(t);while(d.length)d.shift()();return r.push.apply(r,c||[]),n()}function n(){for(var e,t=0;t<r.length;t++){for(var n=r[t],i=!0,a=1;a<n.length;a++){var l=n[a];0!==s[l]&&(i=!1)}i&&(r.splice(t--,1),e=o(o.s=n[0]))}return e}var i={},s={app:0},r=[];function o(t){if(i[t])return i[t].exports;var n=i[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,o),n.l=!0,n.exports}o.m=e,o.c=i,o.d=function(e,t,n){o.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},o.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},o.t=function(e,t){if(1&t&&(e=o(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(o.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)o.d(n,i,function(t){return e[t]}.bind(null,i));return n},o.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return o.d(t,"a",t),t},o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},o.p="/";var a=window["webpackJsonp"]=window["webpackJsonp"]||[],l=a.push.bind(a);a.push=t,a=a.slice();for(var c=0;c<a.length;c++)t(a[c]);var u=l;r.push([0,"chunk-vendors"]),n()})({0:function(e,t,n){e.exports=n("56d7")},"0cf8":function(e,t,n){"use strict";var i=n("b3d6"),s=n.n(i);s.a},"129d":function(e,t,n){"use strict";var i=n("5a77"),s=n.n(i);s.a},"17d8":function(e,t,n){"use strict";var i=n("52a5"),s=n.n(i);s.a},1871:function(e,t,n){"use strict";var i=n("87c0"),s=n.n(i);s.a},"187d":function(e,t,n){},"1b17":function(e,t,n){},"1c15":function(e,t,n){},2300:function(e,t,n){"use strict";var i=n("187d"),s=n.n(i);s.a},"23e0":function(e,t,n){},"34c7":function(e,t,n){},"3e6c":function(e,t,n){"use strict";var i=n("cd41"),s=n.n(i);s.a},"4da2":function(e,t,n){},5166:function(e,t,n){"use strict";var i=n("5fb2"),s=n.n(i);s.a},"52a5":function(e,t,n){},5389:function(e,t,n){},"55fe":function(e,t,n){"use strict";var i=n("b14e"),s=n.n(i);s.a},"56d7":function(e,t,n){"use strict";n.r(t);n("cadf"),n("551c"),n("f751"),n("097d");var i=n("2b0e"),s=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{attrs:{id:"app"}},[n("div",{staticClass:"main"},[n("split",{staticClass:"splitter",attrs:{gutterSize:10},on:{onDrag:e.splitDrag}},[n("split-area",{staticClass:"split-editor",attrs:{size:50}},[n("the-editor")],1),n("split-area",{staticClass:"split-document",attrs:{size:50}},[n("the-document",{attrs:{eventBus:e.documentEventBus}})],1)],1)],1)])},r=[],o=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"editor"},[n("div",{ref:"progress",staticClass:"progress"},[n("i",{staticClass:"progress__icon fas fa-spinner fa-5x"})]),n("the-editor-toolbar",{on:{insertPrimaryNote:e.insertPrimaryNote,insertSecondaryNote:e.insertSecondaryNote,insertTertiaryNote:e.insertTertiaryNote,insertNewspaperNote:e.insertNewspaperNote,insertHandwrittenNote:e.insertHandwrittenNote,insertPhbNote:e.insertPhbNote,insertCocStatBlock:e.insertCocStatBlock,insertDndStatBlock:e.insertDndStatBlock,insertRegularTable:e.insertRegularTable,insertDndCustomTable:e.insertDndCustomTable,insertRegularPage:e.insertRegularPage,insertRelativeImage:e.insertRelativeImage,insertAbsoluteImage:e.insertAbsoluteImage,insertFullPageImage:e.insertFullPageImage,insertTwoColumnPage:e.insertTwoColumnPage,insertThreeColumnPage:e.insertThreeColumnPage,insertTitlePage:e.insertTitlePage,insertColumnBreak:e.insertColumnBreak,insertWideBlock:e.insertWideBlock,insertVerticalSpacing:e.insertVerticalSpacing,insertCustomTitlePageFont:e.insertCustomTitlePageFont,insertCustomHeadersFont:e.insertCustomHeadersFont,insertCustomNoteHeadersFont:e.insertCustomNoteHeadersFont,insertCustomRegularTextFont:e.insertCustomRegularTextFont,insertCustomNewspaperHeadersFont:e.insertCustomNewspaperHeadersFont,insertCustomNewspaperTextFont:e.insertCustomNewspaperTextFont,insertCustomHandwritingFont:e.insertCustomHandwritingFont,syncFile:e.syncFile,downloadGoogleDriveFile:e.downloadGoogleDriveFile,uploadGoogleDriveFile:e.uploadGoogleDriveFile,downloadFile:e.downloadFile,uploadFile:e.uploadFile,scrollToPage:e.scrollToPage}}),n("codemirror",{ref:"editor",attrs:{options:e.codeMirrorOptions},on:{input:e.codeChange,cursorActivity:e.cursorPositionChange}}),n("the-file-picker",{ref:"filePicker",on:{downloadFile:e.downloadFileUsingProvider,uploadFile:e.uploadFileUsingProvider,signOut:e.signOutFromProvider}})],1)},a=[],l=(n("96cf"),n("3b8d")),c=(n("4917"),n("cebc")),u=n("56b3"),p=n.n(u),d=n("8f94"),m=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"toolbar"},[n("dropdown-menu",[n("template",{slot:"dropdown-button"},[n("i",{staticClass:"fas fa-sticky-note"}),e._v(" Notes\n    ")]),n("template",{slot:"dropdown-content"},[n("dropdown-item",{on:{click:e.insertPrimaryNote}},[n("i",{staticClass:"fas fa-sticky-note",staticStyle:{color:"rgb(218, 230, 191)"}}),e._v(" Primary")]),n("dropdown-item",{on:{click:e.insertSecondaryNote}},[n("i",{staticClass:"fas fa-sticky-note",staticStyle:{color:"rgb(220, 207, 172)"}}),e._v(" Secondary")]),n("dropdown-item",{on:{click:e.insertTertiaryNote}},[n("i",{staticClass:"fas fa-sticky-note",staticStyle:{color:"rgb(231, 227, 239)"}}),e._v(" Tertiary")]),n("dropdown-item",{on:{click:e.insertNewspaperNote}},[n("i",{staticClass:"fas fa-sticky-note",staticStyle:{color:"rgb(244, 244, 226)"}}),e._v(" Newspaper")]),n("dropdown-item",{on:{click:e.insertHandwrittenNote}},[n("i",{staticClass:"fas fa-sticky-note",staticStyle:{color:"rgb(244, 244, 236)"}}),e._v(" Handwritten")])],1)],2),n("toolbar-separator"),n("dropdown-menu",[n("template",{slot:"dropdown-button"},[n("i",{staticClass:"fas fa-table"}),e._v(" Stat Blocks\n    ")]),n("template",{slot:"dropdown-content"},[n("dropdown-item",{on:{click:e.insertCocStatBlock}},[n("i",{staticClass:"fas fa-table"}),e._v(" Call of Cthulhu")]),n("dropdown-item",{on:{click:e.insertDndStatBlock}},[n("i",{staticClass:"fas fa-table"}),e._v(" Dungeons & Dragons")])],1)],2),n("toolbar-separator"),n("dropdown-menu",[n("template",{slot:"dropdown-button"},[n("i",{staticClass:"fas fa-table"}),e._v(" Tables\n    ")]),n("template",{slot:"dropdown-content"},[n("dropdown-item",{on:{click:e.insertRegularTable}},[n("i",{staticClass:"fas fa-table"}),e._v(" Table")]),n("dropdown-item",{on:{click:e.insertDndCustomTable}},[n("i",{staticClass:"fas fa-table"}),e._v(" Custom DnD Table")])],1)],2),n("toolbar-separator"),n("dropdown-menu",[n("template",{slot:"dropdown-button"},[n("i",{staticClass:"fas fa-file"}),e._v(" Pages\n    ")]),n("template",{slot:"dropdown-content"},[n("dropdown-item",{on:{click:e.insertRegularPage}},[n("i",{staticClass:"fas fa-file"}),e._v(" Page")]),n("dropdown-item",{on:{click:e.insertTwoColumnPage}},[n("i",{staticClass:"fas fa-file"}),e._v(" Two Column Page")]),n("dropdown-item",{on:{click:e.insertThreeColumnPage}},[n("i",{staticClass:"fas fa-file"}),e._v(" Three Column Page")]),n("dropdown-item",{on:{click:e.insertTitlePage}},[n("i",{staticClass:"fas fa-file"}),e._v(" Title Page")])],1)],2),n("toolbar-separator"),n("dropdown-menu",[n("template",{slot:"dropdown-button"},[n("i",{staticClass:"fas fa-image"}),e._v(" Images\n    ")]),n("template",{slot:"dropdown-content"},[n("dropdown-item",{on:{click:e.insertRelativeImage}},[n("i",{staticClass:"fas fa-image"}),e._v(" Relative Image")]),n("dropdown-item",{on:{click:e.insertAbsoluteImage}},[n("i",{staticClass:"fas fa-image"}),e._v(" Absolute Image")]),n("dropdown-item",{on:{click:e.insertFullPageImage}},[n("i",{staticClass:"fas fa-file-image"}),e._v(" Full Page Image")])],1)],2),n("toolbar-separator"),n("dropdown-menu",[n("template",{slot:"dropdown-button"},[n("i",{staticClass:"fas fa-random"}),e._v(" Misc\n    ")]),n("template",{slot:"dropdown-content"},[n("dropdown-item",{on:{click:e.insertColumnBreak}},[n("i",{staticClass:"fas fa-columns"}),e._v(" Column Break")]),n("dropdown-item",{on:{click:e.insertWideBlock}},[n("i",{staticClass:"fas fa-arrows-alt-h"}),e._v(" Wide Block")]),n("dropdown-item",{on:{click:e.insertVerticalSpacing}},[n("i",{staticClass:"fas fa-arrows-alt-v"}),e._v(" Vertical Spacing")])],1)],2),n("toolbar-separator"),n("dropdown-menu",[n("template",{slot:"dropdown-button"},[n("i",{staticClass:"fas fa-font"}),e._v(" Fonts\n    ")]),n("template",{slot:"dropdown-content"},[n("dropdown-item",{on:{click:e.insertCustomTitlePageFont}},[n("i",{staticClass:"fas fa-font"}),e._v(" Title Font")]),n("dropdown-item",{on:{click:e.insertCustomHeadersFont}},[n("i",{staticClass:"fas fa-font"}),e._v(" Headers Font")]),n("dropdown-item",{on:{click:e.insertCustomNoteHeadersFont}},[n("i",{staticClass:"fas fa-font"}),e._v(" Note Headers Font")]),n("dropdown-item",{on:{click:e.insertCustomRegularTextFont}},[n("i",{staticClass:"fas fa-font"}),e._v(" Regular Text Font")]),n("dropdown-item",{on:{click:e.insertCustomNewspaperHeadersFont}},[n("i",{staticClass:"fas fa-font"}),e._v(" Newspaper Headers Font")]),n("dropdown-item",{on:{click:e.insertCustomNewspaperTextFont}},[n("i",{staticClass:"fas fa-font"}),e._v(" Newspaper Text Font")]),n("dropdown-item",{on:{click:e.insertCustomHandwritingFont}},[n("i",{staticClass:"fas fa-font"}),e._v(" Handwriting Font")])],1)],2),n("toolbar-separator"),n("div",{staticClass:"toolbar__spacer"}),n("toolbar-separator"),n("button-item",{attrs:{disabled:!this.storageProviderFileId},on:{click:e.syncFile}},[n("i",{staticClass:"fas fa-sync"}),e._v(" Sync")]),n("toolbar-separator"),n("dropdown-menu",[n("template",{slot:"dropdown-button"},[n("i",{staticClass:"fas fa-file"}),e._v(" File\n    ")]),n("template",{slot:"dropdown-content"},[n("dropdown-item",{on:{click:e.downloadGoogleDriveFile}},[n("i",{staticClass:"fab fa-google-drive"}),e._v(" Download - Google Drive")]),n("dropdown-item",{on:{click:e.uploadGoogleDriveFile}},[n("i",{staticClass:"fab fa-google-drive"}),e._v(" Upload - Google Drive")]),n("dropdown-item",{on:{click:e.downloadFile}},[n("i",{staticClass:"fas fa-download"}),e._v(" Download File")]),n("dropdown-item",{on:{click:e.uploadFile}},[n("i",{staticClass:"fas fa-upload"}),e._v(" Upload File")])],1)],2),n("toolbar-separator"),n("button-item",{on:{click:e.scrollToPage}},[n("i",{staticClass:"fas fa-arrows-alt-v"}),e._v(" Locate")])],1)},h=[],f=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("button",{staticClass:"button",class:{"button--is-icon":e.isIcon,"button--is-clicked":e.isClicked},on:{click:function(t){return e.$emit("click")}}},[e._t("default")],2)},g=[],v={name:"ButtonItem",props:{isIcon:{type:Boolean,required:!1,default:!1},isClicked:{type:Boolean,required:!1,default:!1}}},b=v,w=(n("f3e4"),n("2877")),C=Object(w["a"])(b,f,g,!1,null,"5396c772",null),S=C.exports,y=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"dropdown"},[n("button-item",{staticClass:"dropdown__button"},[e._t("dropdown-button")],2),n("div",{staticClass:"dropdown__content"},[e._t("dropdown-content")],2)],1)},k=[],P={name:"DropdownMenu",components:{ButtonItem:S}},T=P,x=(n("0cf8"),Object(w["a"])(T,y,k,!1,null,"eaad124c",null)),_=x.exports,F=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("button",{staticClass:"dropdown-item",class:{"dropdown-item--is-clicked":e.isClicked},on:{click:function(t){return e.$emit("click")}}},[e._t("default")],2)},I=[],N={name:"ButtonItem",props:{isClicked:{type:Boolean,required:!1,default:!1}}},$=N,D=(n("55fe"),Object(w["a"])($,F,I,!1,null,"13d41d15",null)),O=D.exports,H=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"separator"})},L=[],E={name:"ToolbarSeparator"},B=E,M=(n("ae7e"),Object(w["a"])(B,H,L,!1,null,"4dc49e8a",null)),j=M.exports,R=n("2f62"),z={name:"TheEditorToolbar",components:{ButtonItem:S,DropdownMenu:_,DropdownItem:O,ToolbarSeparator:j},computed:Object(c["a"])({},Object(R["b"])({storageProviderFileId:"filepicker/fileId"})),methods:{insertPrimaryNote:function(){this.$emit("insertPrimaryNote")},insertSecondaryNote:function(){this.$emit("insertSecondaryNote")},insertTertiaryNote:function(){this.$emit("insertTertiaryNote")},insertNewspaperNote:function(){this.$emit("insertNewspaperNote")},insertHandwrittenNote:function(){this.$emit("insertHandwrittenNote")},insertCocStatBlock:function(){this.$emit("insertCocStatBlock")},insertDndStatBlock:function(){this.$emit("insertDndStatBlock")},insertRegularTable:function(){this.$emit("insertRegularTable")},insertDndCustomTable:function(){this.$emit("insertDndCustomTable")},insertRegularPage:function(){this.$emit("insertRegularPage")},insertRelativeImage:function(){this.$emit("insertRelativeImage")},insertAbsoluteImage:function(){this.$emit("insertAbsoluteImage")},insertFullPageImage:function(){this.$emit("insertFullPageImage")},insertTwoColumnPage:function(){this.$emit("insertTwoColumnPage")},insertThreeColumnPage:function(){this.$emit("insertThreeColumnPage")},insertTitlePage:function(){this.$emit("insertTitlePage")},insertColumnBreak:function(){this.$emit("insertColumnBreak")},insertWideBlock:function(){this.$emit("insertWideBlock")},insertVerticalSpacing:function(){this.$emit("insertVerticalSpacing")},insertCustomTitlePageFont:function(){this.$emit("insertCustomTitlePageFont")},insertCustomHeadersFont:function(){this.$emit("insertCustomHeadersFont")},insertCustomNoteHeadersFont:function(){this.$emit("insertCustomNoteHeadersFont")},insertCustomRegularTextFont:function(){this.$emit("insertCustomRegularTextFont")},insertCustomNewspaperHeadersFont:function(){this.$emit("insertCustomNewspaperHeadersFont")},insertCustomNewspaperTextFont:function(){this.$emit("insertCustomNewspaperTextFont")},insertCustomHandwritingFont:function(){this.$emit("insertCustomHandwritingFont")},syncFile:function(){this.$emit("syncFile")},downloadGoogleDriveFile:function(){this.$emit("downloadGoogleDriveFile")},uploadGoogleDriveFile:function(){this.$emit("uploadGoogleDriveFile")},downloadFile:function(){this.$emit("downloadFile")},uploadFile:function(){this.$emit("uploadFile")},scrollToPage:function(){this.$emit("scrollToPage")}}},q=z,A=(n("d520"),Object(w["a"])(q,m,h,!1,null,"6ab1dac9",null)),Z=A.exports,W=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"filepicker"},[n("modal-item",{ref:"modal"},[n("template",{slot:"modal-header"},[n("div",{staticClass:"filepicker__header"},[n("h2",[e._v(e._s(e.downloadMode?"Choose File":"")+e._s(e.uploadMode?"Save As":""))]),n("button-item",{staticClass:"filepicker__icon-button",attrs:{"is-icon":""},on:{click:e.signOut}},[n("i",{staticClass:"fas fa-sign-in-alt"})]),n("button-item",{staticClass:"filepicker__icon-button",attrs:{"is-icon":""},on:{click:e.cancel}},[n("i",{staticClass:"fas fa-times"})])],1)]),n("template",{slot:"modal-content"},[n("div",{staticClass:"filepicker__directory"},[n("button-item",{staticClass:"filepicker__icon-button",attrs:{"is-icon":""},on:{click:e.goBack}},[n("i",{staticClass:"fas fa-arrow-up"})]),n("span",[e._v(e._s(e.path))])],1),n("div",{staticClass:"filepicker__container"},[n("table",{ref:"fileTable",staticClass:"filepicker__table",on:{click:e.itemDeselected}},[n("tbody",e._l(e.fileList,function(t){return n("tr",{key:t.id,staticClass:"filepicker__row",on:{click:function(t){return t.stopPropagation(),e.itemSelected(t)},dblclick:function(t){return t.stopPropagation(),e.itemOpened(t)}}},[n("td",{staticClass:"filepicker__col-icon"},[n("i",{class:{"fas fa-folder":t.mimeType===e.folderMimeType,"fas fa-file":t.mimeType!==e.folderMimeType}})]),n("td",{staticClass:"filepicker__col-name"},[e._v(e._s(t.name))]),n("td",{staticClass:"filepicker__col-modified-time"},[e._v(e._s(t.modifiedTime))]),n("td",{staticClass:"filepicker__col-id"},[e._v(e._s(t.id))]),n("th",{staticClass:"filepicker__col-mime"},[e._v(e._s(t.mimeType))])])}),0)])])]),n("template",{slot:"modal-footer"},[n("div",{staticClass:"filepicker__footer"},[this.uploadMode?n("input-item",{ref:"fileName",staticClass:"filepicker__filename"}):e._e(),this.uploadMode?n("input-item",{staticClass:"filepicker__filetype",attrs:{value:".hmd",disabled:"disabled"}}):e._e(),n("button-item",{staticClass:"filepicker__ok-button",on:{click:e.ok}},[e._v("OK")]),n("button-item",{staticClass:"filepicker__cancel-button",on:{click:e.cancel}},[e._v("Cancel")])],1)])],2)],1)},G=[],V=(n("7514"),n("7f7f"),function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{ref:"modal",staticClass:"modal"},[n("div",{staticClass:"modal__content"},[n("div",{staticClass:"modal__header"},[e._t("modal-header")],2),n("div",{staticClass:"modal__body"},[e._t("modal-content")],2),n("div",{staticClass:"modal__footer"},[e._t("modal-footer")],2)])])}),J=[],U={name:"ModalItem",methods:{show:function(){this.$refs.modal.classList.add("modal--is-visible")},hide:function(){this.$refs.modal.classList.remove("modal--is-visible")}}},K=U,Q=(n("1871"),Object(w["a"])(K,V,J,!1,null,"285c0666",null)),Y=Q.exports,X=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("input",{directives:[{name:"model",rawName:"v-model",value:e.value,expression:"value"}],staticClass:"input",domProps:{value:e.value},on:{input:function(t){t.target.composing||(e.value=t.target.value)}}})},ee=[],te={name:"InputItem",data:function(){return{value:""}}},ne=te,ie=(n("dc60"),Object(w["a"])(ne,X,ee,!1,null,"511a09a5",null)),se=ie.exports,re=n("340b"),oe={name:"TheFilePicker",components:{ModalItem:Y,ButtonItem:S,InputItem:se},data:function(){return{provider:void 0,fileList:[],pathIdList:[],visible:!1,folderMimeType:"application/vnd.google-apps.folder",path:"/",selectedItem:void 0,downloadMode:!0,uploadMode:!1}},methods:{setProvider:function(e){this.provider=e},setDownloadMode:function(){this.downloadMode=!0,this.uploadMode=!1},setUploadMode:function(){this.downloadMode=!1,this.uploadMode=!0},show:function(){var e=Object(l["a"])(regeneratorRuntime.mark(function e(){var t;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(this.provider){e.next=3;break}return alert("Storage provider not set!"),e.abrupt("return");case 3:return e.next=5,this.provider.listFiles();case 5:t=e.sent,t&&200===t.status?this.fileList=t.result.files.map(function(e){return{id:e.id,name:e.name,mimeType:e.mimeType,modifiedTime:Object(re["format"])(new Date(e.modifiedTime),"YYYY-MM-DD HH:mm")}}):alert(t),this.path="/",this.visible=!0,this.$refs.modal.show();case 10:case"end":return e.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}(),clearSelection:function(){var e=this.$refs.fileTable.querySelector(".filepicker__row--is-selected");e&&e.classList.remove("filepicker__row--is-selected"),this.selectedItem=void 0},clearFileName:function(){this.$refs.fileName&&(this.$refs.fileName.value="")},cancel:function(){this.close()},ok:function(){if(this.provider)if(this.downloadMode){if(!this.selectedItem)return void alert("File not selected!");this.selectedItem.mimeType===this.folderMimeType?this.openFolder():(this.downloadFile(),this.close())}else if(this.uploadMode){if(!this.selectedItem&&!this.$refs.fileName)return void alert("Select a file or provide a name for a new file!");this.selectedItem&&this.selectedItem.mimeType===this.folderMimeType?this.openFolder():(this.uploadFile(),this.close())}else alert("Download/Upload mode not set!");else alert("Storage provider not set!")},close:function(){this.clearSelection(),this.clearFileName(),this.pathIdList=[],this.visible=!1,this.$refs.modal.hide()},goBack:function(){var e=Object(l["a"])(regeneratorRuntime.mark(function e(){var t,n;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(this.provider){e.next=3;break}return alert("Storage provider not set!"),e.abrupt("return");case 3:if("/"!==this.path){e.next=5;break}return e.abrupt("return");case 5:return this.pathIdList.length>0&&this.pathIdList.pop(),t=0==this.pathIdList.length?"root":this.pathIdList[this.pathIdList.length-1],e.next=9,this.provider.listFiles(t);case 9:n=e.sent,n&&200===n.status?this.fileList=n.result.files:alert(n),this.path=this.path.substring(0,this.path.length-1),this.path=this.path.substring(0,this.path.lastIndexOf("/")),this.path+="/";case 14:case"end":return e.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}(),itemSelected:function(e){this.clearSelection();var t=e.target.parentElement,n=t.querySelector(".filepicker__col-id").innerHTML;this.selectedItem=this.fileList.find(function(e){return e.id===n}),t.classList.add("filepicker__row--is-selected"),this.uploadMode&&this.selectedItem.mimeType!==this.folderMimeType?this.selectedItem.name.length>4&&this.selectedItem.name.substring(this.selectedItem.name.length-4)==="."+this.provider.fileExtension?this.$refs.fileName.value=this.selectedItem.name.substring(0,this.selectedItem.name.length-4):this.$refs.fileName.value=this.selectedItem.name:this.clearFileName()},itemDeselected:function(){this.clearSelection()},itemOpened:function(e){if(e.stopPropagation(),this.provider){var t=e.target.parentElement,n=t.querySelector(".filepicker__col-id").innerHTML;this.selectedItem=this.fileList.find(function(e){return e.id===n}),this.selectedItem.mimeType===this.folderMimeType?this.openFolder():this.downloadMode?(this.downloadFile(),this.close()):(this.uploadFile(),this.close())}else alert("Storage provider not set!")},openFolder:function(){var e=Object(l["a"])(regeneratorRuntime.mark(function e(){var t;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(this.provider){e.next=3;break}return alert("Storage provider not set!"),e.abrupt("return");case 3:return this.pathIdList.push(this.selectedItem.id),e.next=6,this.provider.listFiles(this.selectedItem.id);case 6:t=e.sent,t&&200===t.status?(this.path+=this.selectedItem.name+"/",this.selectedItem=void 0,this.fileList=t.result.files):alert(t);case 8:case"end":return e.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}(),downloadFile:function(){this.provider?(this.$store.commit("filepicker/setFileId",this.selectedItem.id),this.$emit("downloadFile")):alert("Storage provider not set!")},uploadFile:function(){if(this.provider){if(this.selectedItem)if(this.selectedItem.mimeType===this.folderMimeType){if(!this.$refs.fileName.value)return void alert("Select a file with ."+this.provider.fileExtension+" extension");var e=this.$refs.fileName.value+"."+this.provider.fileExtension;this.$store.commit("filepicker/setFileId",this.selectedItem.id),this.$store.commit("filepicker/setFileName",e),this.pathIdList.length>0?this.$store.commit("filepicker/setFileParentId",this.pathIdList[this.pathIdList.length-1]):this.$store.commit("filepicker/setFileParentId",void 0)}else if(this.$refs.fileName.value&&this.$refs.fileName.value+"."+this.provider.fileExtension===this.selectedItem.name)this.$store.commit("filepicker/setFileId",this.selectedItem.id),this.$store.commit("filepicker/setFileName",void 0),this.pathIdList.length>0?this.$store.commit("filepicker/setFileParentId",this.pathIdList[this.pathIdList.length-1]):this.$store.commit("filepicker/setFileParentId",void 0);else{if(!this.$refs.fileName.value)return void alert("Select a file with ."+this.provider.fileExtension+" extenion");var t=this.$refs.fileName.value+"."+this.provider.fileExtension;this.$store.commit("filepicker/setFileId",void 0),this.$store.commit("filepicker/setFileName",t),this.pathIdList.length>0?this.$store.commit("filepicker/setFileParentId",this.pathIdList[this.pathIdList.length-1]):this.$store.commit("filepicker/setFileParentId",void 0)}else{if(!this.$refs.fileName.value||""===this.$refs.fileName.value)return void alert("Please provide file name");var n=this.$refs.fileName.value+"."+this.provider.fileExtension;this.$store.commit("filepicker/setFileId",void 0),this.$store.commit("filepicker/setFileName",n),this.pathIdList.length>0?this.$store.commit("filepicker/setFileParentId",this.pathIdList[this.pathIdList.length-1]):this.$store.commit("filepicker/setFileParentId",void 0)}this.$emit("uploadFile")}else alert("Storage provider not set!")},signOut:function(){this.$emit("signOut")}}},ae=oe,le=(n("61fa"),Object(w["a"])(ae,W,G,!1,null,"38b1be18",null)),ce=le.exports,ue=(n("a7be"),n("959b"),n("d69f"),n("2aed"),n("b933"),n("0b6c"),n("18fe"),n("9eb9"),n("31c5"),n("9c7b"),n("715d"),n("23de"),n("7289"),n("2ef0")),pe=n.n(ue),de=n("d225"),me=n("308d"),he=n("6bb5"),fe=n("b0b4"),ge=n("4e2b"),ve=function(){function e(){Object(de["a"])(this,e)}return Object(fe["a"])(e,[{key:"fileExtension",get:function(){return"hmd"}}]),e}(),be=function(e){function t(){return Object(de["a"])(this,t),Object(me["a"])(this,Object(he["a"])(t).call(this))}return Object(ge["a"])(t,e),Object(fe["a"])(t,[{key:"clientId",get:function(){return"228271316918-k2sarmhfjfi842477oqnnbofunmv7tef.apps.googleusercontent.com"}},{key:"apiKey",get:function(){return"AIzaSyClUHnIHhxGPGKBQaQ9PLuzSDwbGmQ-5MM"}},{key:"discoveryDocs",get:function(){return["https://www.googleapis.com/discovery/v1/apis/drive/v3/rest"]}},{key:"scopes",get:function(){return"https://www.googleapis.com/auth/drive"}},{key:"type",get:function(){return"GoogleDrive"}}]),Object(fe["a"])(t,[{key:"load",value:function(){var e=Object(l["a"])(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:window.gapi.load("client:auth2",this.initClient.bind(this));case 1:if(window.gapi.auth2&&window.gapi.auth2.getAuthInstance()){e.next=6;break}return e.next=4,new Promise(function(e){return setTimeout(e,100)});case 4:e.next=1;break;case 6:case"end":return e.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}()},{key:"initClient",value:function(){var e=Object(l["a"])(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,window.gapi.client.init({apiKey:this.apiKey,clientId:this.clientId,discoveryDocs:this.discoveryDocs,scope:this.scopes});case 2:window.gapi.auth2.getAuthInstance().isSignedIn.listen(this.updateSigninStatus.bind(this));case 3:case"end":return e.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}()},{key:"updateSigninStatus",value:function(e){this.isSignedIn=e}},{key:"authenticate",value:function(){var e=Object(l["a"])(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,window.gapi.auth2.getAuthInstance().signIn();case 2:this.updateSigninStatus(window.gapi.auth2.getAuthInstance().isSignedIn.get());case 3:case"end":return e.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}()},{key:"signOut",value:function(){return window.gapi.auth2.getAuthInstance().signOut()}},{key:"disconnect",value:function(){return window.gapi.auth2.getAuthInstance().disconnect()}},{key:"listFiles",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"root",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1e3;return window.gapi.client.drive.files.list({pageSize:t,fields:"nextPageToken, files(id, name, fileExtension, mimeType, modifiedTime)",spaces:"drive",q:'trashed = false and "'+e+'" in parents and (name contains ".'+this.fileExtension+'" or mimeType = "application/vnd.google-apps.folder")'})}},{key:"downloadFile",value:function(e){return window.gapi.client.drive.files.get({fileId:e,alt:"media"})}},{key:"uploadFile",value:function(){var e=Object(l["a"])(regeneratorRuntime.mark(function e(t,n){var i,s,r,o=arguments;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return i=o.length>2&&void 0!==o[2]?o[2]:"root",e.next=3,window.gapi.client.drive.files.create({resource:{name:t,mimeType:"application/json",parents:[i]},fields:"id"});case 3:if(s=e.sent,!s||200!==s.status){e.next=8;break}r=s.result.id,e.next=9;break;case 8:throw"Error creating the file, "+s;case 9:return e.abrupt("return",this.updateFile(n,r));case 10:case"end":return e.stop()}},e,this)}));function t(t,n){return e.apply(this,arguments)}return t}()},{key:"updateFile",value:function(e,t){return window.gapi.client.request({path:"/upload/drive/v3/files/"+t,method:"PATCH",params:{uploadType:"media"},body:e})}}]),t}(ve),we={name:"TheEditor",components:{codemirror:d["codemirror"],TheEditorToolbar:Z,TheFilePicker:ce},data:function(){return{codeMirror:void 0,codeMirrorOptions:{styleActiveLine:!0,tabSize:2,mode:"homebrew-markdown",theme:"custom",lineNumbers:!0,lineWrapping:!0,highlightSelectionMatches:{annotateScrollbar:!0}},codeMirrorCommentOptions:{blockCommentStart:"\x3c!--",blockCommentEnd:"--\x3e",fullLines:!1},storageProvider:void 0}},computed:Object(c["a"])({},Object(R["b"])({pageBreakIndexes:"editor/pageBreakIndexes",rawCode:"editor/rawCode",storageProviderFileId:"filepicker/fileId",storageProviderFileName:"filepicker/fileName",storageProviderFileParentId:"filepicker/fileParentId",documentCurrentPageIndex:"document/currentPageIndex",theme:"document/theme",primaryNoteSnippet:"editorSnippets/primaryNoteSnippet",secondaryNoteSnippet:"editorSnippets/secondaryNoteSnippet",tertiaryNoteSnippet:"editorSnippets/tertiaryNoteSnippet",newspaperNoteSnippet:"editorSnippets/newspaperNoteSnippet",handwrittenNoteSnippet:"editorSnippets/handwrittenNoteSnippet",phbNoteSnippet:"editorSnippets/phbNoteSnippet",cthulhuStatTableSnippet:"editorSnippets/cthulhuStatTableSnippet",dndStatTableSnippet:"editorSnippets/dndStatTableSnippet",tableSnippet:"editorSnippets/tableSnippet",dndCustomTableSnippet:"editorSnippets/dndCustomTableSnippet",pageSnippet:"editorSnippets/pageSnippet",twoColumnPageSnippet:"editorSnippets/twoColumnPageSnippet",threeColumnPageSnippet:"editorSnippets/threeColumnPageSnippet",titlePageSnippet:"editorSnippets/titlePageSnippet",relativeImageSnippet:"editorSnippets/relativeImageSnippet",absoluteImageSnippet:"editorSnippets/absoluteImageSnippet",fullPageImageSnippet:"editorSnippets/fullPageImageSnippet",columnBreakSnippet:"editorSnippets/columnBreakSnippet",wideBlockSnippet:"editorSnippets/wideBlockSnippet",verticalSpacingSnippet:"editorSnippets/verticalSpacingSnippet",customTitlePageFontSnippet:"editorSnippets/customTitlePageFontSnippet",customHeadersFontSnippet:"editorSnippets/customHeadersFontSnippet",customNoteHeadersFontSnippet:"editorSnippets/customNoteHeadersFontSnippet",customRegularTextFontSnippet:"editorSnippets/customRegularTextFontSnippet",customNewspaperHeadersFontSnippet:"editorSnippets/customNewspaperHeadersFontSnippet",customNewspaperTextFontSnippet:"editorSnippets/customNewspaperTextFontSnippet",customHandwritingFontSnippet:"editorSnippets/customHandwritingFontSnippet"})),beforeCreate:function(){p.a.defineMode("homebrew-markdown",function(e,t){var n={token:function(e){var t;if(e.match("\\page")){while(null!=(t=e.next())&&"]"!=t);return"line-cm-new-page-line"}while(null!=e.next()&&!e.match("\\page",!1));return null}};return p.a.overlayMode(p.a.getMode(e,t.backdrop||"text/x-markdown"),n)}),p.a.keyMap.default["Ctrl-G"]="jumpToLine"},mounted:function(){this.codeMirror=this.$refs.editor.codemirror,this.codeMirror.showMatchesOnScrollbar("\\page",!1,{className:"CodeMirror-search-match-new-page"}),this.$refs.editor.codemirror.setOption("extraKeys",{"Ctrl-/":this.commentText.bind(this)})},methods:{insertPrimaryNote:function(){this.insertData(this.primaryNoteSnippet,this.getCursorPosition())},insertSecondaryNote:function(){this.insertData(this.secondaryNoteSnippet,this.getCursorPosition())},insertTertiaryNote:function(){this.insertData(this.tertiaryNoteSnippet,this.getCursorPosition())},insertNewspaperNote:function(){this.insertData(this.newspaperNoteSnippet,this.getCursorPosition())},insertHandwrittenNote:function(){this.insertData(this.handwrittenNoteSnippet,this.getCursorPosition())},insertPhbNote:function(){this.insertData(this.phbNoteSnippet,this.getCursorPosition())},insertCocStatBlock:function(){this.insertData(this.cthulhuStatTableSnippet,this.getCursorPosition())},insertDndStatBlock:function(){this.insertData(this.dndStatTableSnippet,this.getCursorPosition())},insertRegularTable:function(){this.insertData(this.tableSnippet,this.getCursorPosition())},insertDndCustomTable:function(){this.insertData(this.dndCustomTableSnippet,this.getCursorPosition())},insertRegularPage:function(){this.insertData(this.pageSnippet,this.getCursorPosition())},insertTwoColumnPage:function(){this.insertData(this.twoColumnPageSnippet,this.getCursorPosition())},insertThreeColumnPage:function(){this.insertData(this.threeColumnPageSnippet,this.getCursorPosition())},insertTitlePage:function(){this.insertData(this.titlePageSnippet,this.getCursorPosition())},insertRelativeImage:function(){this.insertData(this.relativeImageSnippet,this.getCursorPosition())},insertAbsoluteImage:function(){this.insertData(this.absoluteImageSnippet,this.getCursorPosition())},insertFullPageImage:function(){this.insertData(this.fullPageImageSnippet,this.getCursorPosition())},insertColumnBreak:function(){this.insertData(this.columnBreakSnippet,this.getCursorPosition())},insertWideBlock:function(){this.insertData(this.wideBlockSnippet,this.getCursorPosition())},insertVerticalSpacing:function(){this.insertData(this.verticalSpacingSnippet,this.getCursorPosition())},insertCustomTitlePageFont:function(){this.insertData(this.customTitlePageFontSnippet,this.getCursorPosition())},insertCustomHeadersFont:function(){this.insertData(this.customHeadersFontSnippet,this.getCursorPosition())},insertCustomNoteHeadersFont:function(){this.insertData(this.customNoteHeadersFontSnippet,this.getCursorPosition())},insertCustomRegularTextFont:function(){this.insertData(this.customRegularTextFontSnippet,this.getCursorPosition())},insertCustomNewspaperHeadersFont:function(){this.insertData(this.customNewspaperHeadersFontSnippet,this.getCursorPosition())},insertCustomNewspaperTextFont:function(){this.insertData(this.customNewspaperTextFontSnippet,this.getCursorPosition())},insertCustomHandwritingFont:function(){this.insertData(this.customHandwritingFontSnippet,this.getCursorPosition())},codeChange:pe.a.debounce(function(e){var t=[],n=this.codeMirror.getSearchCursor("\\page");while(n.findNext())t.push(n.from().line);this.$store.commit("editor/setPageBreakIndexes",t),this.$store.commit("editor/setRawCode",e)},500),cursorPositionChange:pe.a.debounce(function(e){var t=e.getCursor().line,n=0;if(this.pageBreakIndexes.length>1)for(var i=1;t>=this.pageBreakIndexes[i];i++)n++;this.$store.commit("editor/setCurrentPageIndex",n)},200),getCursorPosition:function(){var e=this.codeMirror.getDoc().getCursor(),t={line:e.line,ch:e.position};return t},commentText:function(){var e=this.codeMirror.getCursor(!0),t=this.codeMirror.getCursor(!1);this.codeMirror.uncomment(e,t,this.codeMirrorCommentOptions)||this.codeMirror.blockComment(e,t,this.codeMirrorCommentOptions)},insertData:function(e,t){this.codeMirror.getDoc().replaceRange(e,t)},scrollToPage:function(){void 0!==this.pageBreakIndexes[this.documentCurrentPageIndex]&&(this.codeMirror.scrollIntoView({line:this.pageBreakIndexes[this.documentCurrentPageIndex],char:0},100),this.codeMirror.setCursor({line:this.pageBreakIndexes[this.documentCurrentPageIndex],ch:0}))},syncFile:function(){var e=Object(l["a"])(regeneratorRuntime.mark(function e(){var t,n;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(!this.storageProviderFileId){e.next=19;break}if(this.$refs.progress.classList.add("progress--is-visible"),this.storageProvider.isSignedIn){e.next=5;break}return e.next=5,this.storageProvider.authenticate();case 5:return t={data:this.rawCode,theme:this.theme},e.prev=6,e.next=9,this.storageProvider.updateFile(JSON.stringify(t),this.storageProviderFileId);case 9:n=e.sent,200!==n.status&&console.error(n),e.next=16;break;case 13:e.prev=13,e.t0=e["catch"](6),console.error(e.t0);case 16:this.$refs.progress.classList.remove("progress--is-visible"),e.next=20;break;case 19:alert("file not selected!");case 20:case"end":return e.stop()}},e,this,[[6,13]])}));function t(){return e.apply(this,arguments)}return t}(),downloadFileUsingProvider:function(){var e=Object(l["a"])(regeneratorRuntime.mark(function e(){var t,n;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(!this.storageProviderFileId){e.next=16;break}if(this.$refs.progress.classList.add("progress--is-visible"),this.storageProvider.isSignedIn){e.next=5;break}return e.next=5,this.storageProvider.authenticate();case 5:return e.prev=5,e.next=8,this.storageProvider.downloadFile(this.storageProviderFileId);case 8:t=e.sent,200===t.status?(n=JSON.parse(t.body),this.codeMirror.setValue(n.data),this.$store.commit("document/setTheme",n.theme)):console.error(t),e.next=15;break;case 12:e.prev=12,e.t0=e["catch"](5),console.error(e.t0);case 15:this.$refs.progress.classList.remove("progress--is-visible");case 16:case"end":return e.stop()}},e,this,[[5,12]])}));function t(){return e.apply(this,arguments)}return t}(),uploadFileUsingProvider:function(){var e=Object(l["a"])(regeneratorRuntime.mark(function e(){var t,n,i,s;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(this.$refs.progress.classList.add("progress--is-visible"),this.storageProvider.isSignedIn){e.next=4;break}return e.next=4,this.storageProvider.authenticate();case 4:if(t={},t.data=this.rawCode,t.theme=this.theme,!this.storageProviderFileId){e.next=21;break}return e.prev=8,e.next=11,this.storageProvider.updateFile(JSON.stringify(t),this.storageProviderFileId);case 11:n=e.sent,200!==n.status&&console.error(n),e.next=18;break;case 15:e.prev=15,e.t0=e["catch"](8),console.error(e.t0);case 18:this.$refs.progress.classList.remove("progress--is-visible"),e.next=37;break;case 21:if(!this.storageProviderFileParentId){e.next=26;break}try{i=this.storageProvider.uploadFile(this.storageProviderFileName,JSON.stringify(t),this.storageProviderFileParentId),200!==i.status?console.error(i):this.$store.commit("filepicker/setFileId",i.result.id)}catch(r){console.error(r)}this.$refs.progress.classList.remove("progress--is-visible"),e.next=37;break;case 26:return e.prev=26,e.next=29,this.storageProvider.uploadFile(this.storageProviderFileName,JSON.stringify(t));case 29:s=e.sent,200!==s.status?console.error(s):this.$store.commit("filepicker/setFileId",s.result.id),e.next=36;break;case 33:e.prev=33,e.t1=e["catch"](26),console.error(e.t1);case 36:this.$refs.progress.classList.remove("progress--is-visible");case 37:case"end":return e.stop()}},e,this,[[8,15],[26,33]])}));function t(){return e.apply(this,arguments)}return t}(),signOutFromProvider:function(){this.$refs.progress.classList.add("progress--is-visible"),this.$refs.filePicker.close();try{this.storageProvider.signOut()}catch(e){console.error(e)}finally{this.$refs.progress.classList.remove("progress--is-visible")}},downloadGoogleDriveFile:function(){var e=Object(l["a"])(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(this.$refs.progress.classList.add("progress--is-visible"),e.prev=1,this.storageProvider&&this.storageProvider instanceof be){e.next=10;break}return this.storageProvider=new be,e.next=6,this.storageProvider.load();case 6:return e.next=8,this.storageProvider.authenticate();case 8:e.next=13;break;case 10:if(this.storageProvider.isSignedIn){e.next=13;break}return e.next=13,this.storageProvider.authenticate();case 13:e.next=19;break;case 15:return e.prev=15,e.t0=e["catch"](1),"popup_closed_by_user"===e.t0.error?this.$refs.progress.classList.remove("progress--is-visible"):(console.error(e.t0),this.$refs.progress.classList.remove("progress--is-visible")),e.abrupt("return");case 19:this.$refs.filePicker.setProvider(this.storageProvider),this.$refs.filePicker.setDownloadMode(),this.$refs.filePicker.show(),this.$refs.progress.classList.remove("progress--is-visible");case 23:case"end":return e.stop()}},e,this,[[1,15]])}));function t(){return e.apply(this,arguments)}return t}(),uploadGoogleDriveFile:function(){var e=Object(l["a"])(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(this.$refs.progress.classList.add("progress--is-visible"),e.prev=1,this.storageProvider&&this.storageProvider instanceof be){e.next=10;break}return this.storageProvider=new be,e.next=6,this.storageProvider.load();case 6:return e.next=8,this.storageProvider.authenticate();case 8:e.next=13;break;case 10:if(this.storageProvider.isSignedIn){e.next=13;break}return e.next=13,this.storageProvider.authenticate();case 13:e.next=19;break;case 15:return e.prev=15,e.t0=e["catch"](1),"popup_closed_by_user"===e.t0.error?this.$refs.progress.classList.remove("progress--is-visible"):(console.error(e.t0),this.$refs.progress.classList.remove("progress--is-visible")),e.abrupt("return");case 19:this.$refs.filePicker.setProvider(this.storageProvider),this.$refs.filePicker.setUploadMode(),this.$refs.filePicker.show(),this.$refs.progress.classList.remove("progress--is-visible");case 23:case"end":return e.stop()}},e,this,[[1,15]])}));function t(){return e.apply(this,arguments)}return t}(),downloadFile:function(){var e={};e.data=this.rawCode,e.theme=this.theme;var t=document.createElement("a");t.setAttribute("href","data:text/json;charset=utf-8,"+encodeURIComponent(JSON.stringify(e))),t.setAttribute("download","homebrew.hmd"),t.style.display="none",document.body.appendChild(t),t.click(),document.body.removeChild(t)},uploadFile:function(){var e=this,t=document.createElement("input");t.setAttribute("type","file"),t.style.display="none",document.body.appendChild(t),t.onchange=function(){var n=new FileReader;n.readAsText(t.files[0]),n.onload=function(){var t=JSON.parse(n.result);e.codeMirror.setValue(t.data),e.$store.commit("document/setTheme",t.theme)},document.body.removeChild(t)},t.click()}}},Ce=we,Se=(n("129d"),Object(w["a"])(Ce,o,a,!1,null,null,null)),ye=Se.exports,ke=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"document"},[n("the-document-toolbar",{on:{zoomChanged:e.zoomChanged,scrollToCursor:e.scrollToCursor,getPDF:e.getPDF}}),n("div",{ref:"pagesContainer",staticClass:"document__pages-container"},[n("div",{ref:"pages",staticClass:"document__pages",on:{change:e.checkOverflow}},[n("spacer-item"),e._l(e.pages,function(e){return n("page-item",{key:e.key,attrs:{pageNumber:e.pageNumber,pageTexturesEnabled:e.pageTexturesEnabled,noteTexturesEnabled:e.noteTexturesEnabled,pageOptions:e.pageOptions,pageTheme:e.pageTheme,textData:e.textData,columnCount:e.columnCount,isTitlePage:e.isTitlePage}})}),n("spacer-item")],2)])],1)},Pe=[],Te=(n("c5f6"),n("28a5"),function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"toolbar"},[n("dropdown-menu",[n("template",{slot:"dropdown-button"},[n("i",{staticClass:"fas fa-image"}),e._v(" Theme\n    ")]),n("template",{slot:"dropdown-content"},[n("dropdown-item",{attrs:{"is-clicked":"theme--default"===e.theme},on:{click:e.toggleDefaultTheme}},[n("i",{staticClass:"fas fa-image"}),e._v(" Default")]),n("dropdown-item",{attrs:{"is-clicked":"theme--cthulhu-1"===e.theme},on:{click:e.toggleCthulhu1Theme}},[n("i",{staticClass:"fas fa-image"}),e._v(" Cthulhu 1")]),n("dropdown-item",{attrs:{"is-clicked":"theme--cthulhu-2"===e.theme},on:{click:e.toggleCthulhu2Theme}},[n("i",{staticClass:"fas fa-image"}),e._v(" Cthulhu 2")])],1)],2),n("toolbar-separator"),n("dropdown-menu",[n("template",{slot:"dropdown-button"},[n("i",{staticClass:"fas fa-image"}),e._v(" Textures\n    ")]),n("template",{slot:"dropdown-content"},[n("dropdown-item",{attrs:{"is-clicked":e.pageTexturesEnabled},on:{click:e.togglePageTextures}},[n("i",{staticClass:"fas fa-image"}),e._v(" Pages")]),n("dropdown-item",{attrs:{"is-clicked":e.noteTexturesEnabled},on:{click:e.toggleNoteTextures}},[n("i",{staticClass:"fas fa-file"}),e._v(" Notes")])],1)],2),n("toolbar-separator"),n("div",{staticClass:"toolbar__spacer"}),n("toolbar-separator"),n("button-item",{on:{click:e.getPDF}},[n("i",{staticClass:"fas fa-file-pdf"}),e._v(" Get PDF")]),n("toolbar-separator"),n("button-item",{on:{click:e.scrollToCursor}},[n("i",{staticClass:"fas fa-arrows-alt-v"}),e._v(" Locate")]),n("toolbar-separator"),n("button-item",[e._v("Page "+e._s(e.pageCount>0?e.documentCurrentPageNumber:0)+"/"+e._s(e.pageCount))]),n("toolbar-separator"),n("button-item",{on:{click:e.zoomIn}},[n("i",{staticClass:"fas fa-search-plus",staticStyle:{"margin-right":"0"}})]),n("toolbar-separator"),n("button-item",{on:{click:e.zoomOut}},[n("i",{staticClass:"fas fa-search-minus",staticStyle:{"margin-right":"0"}})]),n("toolbar-separator"),n("dropdown-menu",[n("template",{slot:"dropdown-button"},[e._v("\n      Zoom "+e._s(e.zoom)+"%\n    ")]),n("template",{slot:"dropdown-content"},[n("dropdown-item",{on:{click:function(t){return e.setZoom(50)}}},[e._v("50%")]),n("dropdown-item",{on:{click:function(t){return e.setZoom(100)}}},[e._v("100%")]),n("dropdown-item",{on:{click:function(t){return e.setZoom(150)}}},[e._v("150%")])],1)],2)],1)}),xe=[],_e={name:"TheDocumentToolbar",components:{ButtonItem:S,DropdownMenu:_,DropdownItem:O,ToolbarSeparator:j},computed:Object(c["a"])({},Object(R["b"])({pageTexturesEnabled:"document/pageTexturesEnabled",noteTexturesEnabled:"document/noteTexturesEnabled",zoom:"document/zoom",theme:"document/theme",documentCurrentPageNumber:"document/currentPageNumber",pageCount:"editor/pageCount"})),methods:{setZoom:function(e){this.$store.dispatch("document/setZoom",e),this.$emit("zoomChanged")},zoomIn:function(){this.$store.dispatch("document/zoomIn"),this.$emit("zoomChanged")},zoomOut:function(){this.$store.dispatch("document/zoomOut"),this.$emit("zoomChanged")},toggleDefaultTheme:function(){this.$store.commit("document/setTheme","theme--default")},toggleCthulhu1Theme:function(){this.$store.commit("document/setTheme","theme--cthulhu-1")},toggleCthulhu2Theme:function(){this.$store.commit("document/setTheme","theme--cthulhu-2")},togglePageTextures:function(){this.$store.commit("document/togglePageTextures")},toggleNoteTextures:function(){this.$store.commit("document/toggleNoteTextures")},scrollToCursor:function(){this.$emit("scrollToCursor")},getPDF:function(){this.$emit("getPDF")}}},Fe=_e,Ie=(n("dd3d"),Object(w["a"])(Fe,Te,xe,!1,null,"2624beea",null)),Ne=Ie.exports,$e=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"spacer"})},De=[],Oe={name:"SpacerItem"},He=Oe,Le=(n("bcee"),Object(w["a"])(He,$e,De,!1,null,"d425f1d8",null)),Ee=Le.exports,Be=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"page",class:e.classList},[e.headerVisible?n("page-header",{attrs:{pageNumber:e.pageNumber,pageTheme:e.pageTheme}}):e._e(),n("div",{ref:"pageContent",staticClass:"page__content"}),e.footerVisible?n("page-footer",{attrs:{pageNumber:e.pageNumber,pageTheme:e.pageTheme}}):e._e()],1)},Me=[],je=(n("ac4d"),n("8a81"),n("ac6a"),n("6762"),n("2fdb"),n("5df3"),n("1c4c"),n("0e54")),Re=n.n(je),ze=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("p",{class:e.classList,domProps:{innerHTML:e._s(e.processedText)}})},qe=[],Ae=(n("a481"),{name:"PageParagraph",props:{text:{type:String,required:!0},pageTheme:{type:String,required:!0}},data:function(){return{classList:[this.pageTheme]}},computed:{processedText:function(){var e=this.text;return e=e.replace(/((?:(?!\*).)|^)\*((?:[^\s*].*?[^\s*])|[^\s*])\*(?!\*)/g,function(e,t,n){return"".concat(t,"<em>").concat(n,"</em>")}),e=e.replace(/((?:(?!\*).)|^)\*\*((?:[^\s*].*?[^\s*])|[^\s*])\*\*(?!\*)/g,function(e,t,n){return"".concat(t,"<strong>").concat(n,"</strong>")}),e=e.replace(/((?:(?!\*).)|^)\*\*\*((?:[^\s*].*?[^\s*])|[^\s*])\*\*\*(?!\*)/g,function(e,t,n){return"".concat(t,"<strong><em>").concat(n,"</em></strong>")}),e}}}),Ze=Ae,We=(n("e8fc"),Object(w["a"])(Ze,ze,qe,!1,null,"d30b1262",null)),Ge=We.exports,Ve=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("hr",{class:e.classList})},Je=[],Ue={name:"PageThematicBreak",props:{pageTheme:{type:String,required:!0}},data:function(){return{classList:[this.pageTheme]}}},Ke=Ue,Qe=Object(w["a"])(Ke,Ve,Je,!1,null,"327623f4",null),Ye=Qe.exports,Xe=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n(e.tag,{tag:"component",staticClass:"heading",class:e.classList},[e._t("default")],2)},et=[],tt={name:"PageHeading",props:{depth:{type:Number,required:!0,validator:function(e){return-1!==[1,2,3,4,5,6].indexOf(e)}},pageTheme:{type:String,requried:!0},isTitlePage:{type:Boolean,required:!1,default:!1}},data:function(){return{tag:"h"+this.depth,classList:[this.pageTheme]}},created:function(){this.isTitlePage&&this.classList.push("heading--is-title")}},nt=tt,it=(n("d83f"),Object(w["a"])(nt,Xe,et,!1,null,"f31d4aea",null)),st=it.exports,rt=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{style:{height:e.pageBreakHeight}})},ot=[],at={name:"PageColumnBreak",props:{pageWorkAreaHeight:{type:Number,required:!1,default:0},precedingComponents:{type:Array,required:!1,default:void 0}},data:function(){return{pageBreakHeight:""}},mounted:function(){window.requestAnimationFrame(this.calculateHeight)},methods:{calculateHeight:function(){if(this.pageWorkAreaHeight&&this.precedingComponents){var e=0,t=!0,n=!1,i=void 0;try{for(var s,r=this.precedingComponents[Symbol.iterator]();!(t=(s=r.next()).done);t=!0){var o=s.value,a=window.getComputedStyle(o.$el);e+=o.$el.offsetHeight+parseInt(a.marginTop)+parseInt(a.marginBottom)}}catch(l){n=!0,i=l}finally{try{t||null==r.return||r.return()}finally{if(n)throw i}}this.pageBreakHeight=this.pageWorkAreaHeight-e+"px"}}}},lt=at,ct=Object(w["a"])(lt,rt,ot,!1,null,"a126fece",null),ut=ct.exports,pt=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{ref:"content",staticClass:"note",class:e.classList})},dt=[],mt={name:"PageNote",props:{noteType:{type:String,required:!0},components:{type:Array,required:!0},pageTheme:{type:String,required:!0},texturesEnabled:{type:Boolean,required:!0},columnCount:{}},data:function(){return{classList:[this.noteType,this.pageTheme],initialized:!1}},created:function(){this.texturesEnabled&&this.classList.push("note--is-textured"),this.columnCount&&this.classList.push("note--columns-"+this.columnCount)},mounted:function(){if(!this.initialized){for(var e=0;e<this.components.length;e++)0===e&&this.components[e].classList.push("first"),e===this.components.length-1&&this.components[e].classList.push("last"),this.$refs.content.appendChild(this.components[e].$el);this.initialized=!0}}},ht=mt,ft=(n("9c65"),Object(w["a"])(ht,pt,dt,!1,null,"f2541c24",null)),gt=ft.exports,vt=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("table",{class:e.classList},[n("thead",[n("tr",e._l(e.processedHeaders,function(t,i){return n("th",{key:i,class:{"align-center":"center"===e.align[i],"align-right":"right"===e.align[i]},domProps:{innerHTML:e._s(t)}})}),0)]),n("tbody",e._l(e.processedCells,function(t,i){return n("tr",{key:i},e._l(t,function(t,i){return n("td",{key:i,class:{"align-center":"center"===e.align[i],"align-right":"right"===e.align[i]},domProps:{innerHTML:e._s(t)}})}),0)}),0)])},bt=[],wt={name:"PageTable",props:{headers:{type:Array,required:!0},align:{type:Array,required:!0},cells:{type:Array,required:!0},pageTheme:{type:String,required:!0}},data:function(){return{classList:[this.pageTheme]}},computed:{processedHeaders:function(){var e=[],t=!0,n=!1,i=void 0;try{for(var s,r=this.headers[Symbol.iterator]();!(t=(s=r.next()).done);t=!0){var o=s.value,a=o;a=a.replace(/((?:(?!\*).)|^)\*((?:[^\s*].*?[^\s*])|[^\s*])\*(?!\*)/g,function(e,t,n){return"".concat(t,"<em>").concat(n,"</em>")}),a=a.replace(/((?:(?!\*).)|^)\*\*((?:[^\s*].*?[^\s*])|[^\s*])\*\*(?!\*)/g,function(e,t,n){return"".concat(t,"<strong>").concat(n,"</strong>")}),a=a.replace(/((?:(?!\*).)|^)\*\*\*((?:[^\s*].*?[^\s*])|[^\s*])\*\*\*(?!\*)/g,function(e,t,n){return"".concat(t,"<strong><em>").concat(n,"</em></strong>")}),e.push(a)}}catch(l){n=!0,i=l}finally{try{t||null==r.return||r.return()}finally{if(n)throw i}}return e},processedCells:function(){var e=[],t=!0,n=!1,i=void 0;try{for(var s,r=this.cells[Symbol.iterator]();!(t=(s=r.next()).done);t=!0){var o=s.value,a=[],l=!0,c=!1,u=void 0;try{for(var p,d=o[Symbol.iterator]();!(l=(p=d.next()).done);l=!0){var m=p.value,h=m;h=h.replace(/((?:(?!\*).)|^)\*((?:[^\s*].*?[^\s*])|[^\s*])\*(?!\*)/g,function(e,t,n){return"".concat(t,"<em>").concat(n,"</em>")}),h=h.replace(/((?:(?!\*).)|^)\*\*((?:[^\s*].*?[^\s*])|[^\s*])\*\*(?!\*)/g,function(e,t,n){return"".concat(t,"<strong>").concat(n,"</strong>")}),h=h.replace(/((?:(?!\*).)|^)\*\*\*((?:[^\s*].*?[^\s*])|[^\s*])\*\*\*(?!\*)/g,function(e,t,n){return"".concat(t,"<strong><em>").concat(n,"</em></strong>")}),a.push(h)}}catch(f){c=!0,u=f}finally{try{l||null==d.return||d.return()}finally{if(c)throw u}}e.push(a)}}catch(f){n=!0,i=f}finally{try{t||null==r.return||r.return()}finally{if(n)throw i}}return e}}},Ct=wt,St=(n("7bbe"),Object(w["a"])(Ct,vt,bt,!1,null,"6d4a01f7",null)),yt=St.exports,kt=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{ref:"content",staticClass:"custom-html",class:e.classList})},Pt=[],Tt={name:"PageHtml",props:{html:{type:String,required:!0},pageTheme:{type:String,required:!0},noteTexturesEnabled:{type:Boolean,required:!0},columnCount:{type:Number,required:!0}},data:function(){return{createdComponents:[],classList:[this.pageTheme]}},created:function(){this.noteTexturesEnabled&&this.classList.push("custom-html--textured")},mounted:function(){this.$refs.content.innerHTML=this.html;var e=this.$refs.content.querySelectorAll('[markdown="1"]'),t=!0,n=!1,i=void 0;try{for(var s,r=e[Symbol.iterator]();!(t=(s=r.next()).done);t=!0){var o=s.value,a=Wt(o.innerHTML,{theme:this.pageTheme,noteTexturesEnabled:this.noteTexturesEnabled});this.createdComponents=a.createdComponents;for(var l=0;l<this.createdComponents.length;l++)0===l&&this.createdComponents[l].classList.push("first"),l===this.createdComponents.length-1&&this.createdComponents[l].classList.push("last"),this.createdComponents[l].$mount();var c=!0,u=!1,p=void 0;try{for(var d,m=this.createdComponents[Symbol.iterator]();!(c=(d=m.next()).done);c=!0){var h=d.value;h.$mount()}}catch(S){u=!0,p=S}finally{try{c||null==m.return||m.return()}finally{if(u)throw p}}o.innerHTML="";var f=!0,g=!1,v=void 0;try{for(var b,w=a.outputComponents[Symbol.iterator]();!(f=(b=w.next()).done);f=!0){var C=b.value;o.appendChild(C.$el)}}catch(S){g=!0,v=S}finally{try{f||null==w.return||w.return()}finally{if(g)throw v}}}}catch(S){n=!0,i=S}finally{try{t||null==r.return||r.return()}finally{if(n)throw i}}},destroyed:function(){for(var e=0;e<this.createdComponents.length;e++)this.createdComponents[e].$destroy();this.createdComponents=[]}},xt=Tt,_t=(n("17d8"),Object(w["a"])(xt,kt,Pt,!1,null,"3cca75dc",null)),Ft=_t.exports,It=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"list"},["unordered"===e.listType?n("ul",{ref:"unorderedList",class:e.classList}):e._e(),"ordered"===e.listType?n("ol",{ref:"orderedList",class:e.classList}):e._e()])},Nt=[],$t={name:"PageList",props:{listType:{type:String,required:!0},listComponents:{type:Array,required:!0},pageTheme:{type:String,required:!0}},data:function(){return{classList:[this.pageTheme],initialized:!1}},mounted:function(){if(!this.initialized){for(var e="unordered"===this.listType?this.$refs.unorderedList:this.$refs.orderedList,t=0;t<this.listComponents.length;t++)if(this.listComponents[t].$el.classList.contains("list"))e.appendChild(this.listComponents[t].$el);else{0===t&&this.listComponents[t].classList.push("first"),this.listComponents[t].classList.push("list-item"),t===this.listComponents.length-1&&this.listComponents[t].classList.push("last");var n=document.createElement("li");n.appendChild(this.listComponents[t].$el),e.appendChild(n)}this.initialized=!0}}},Dt=$t,Ot=Object(w["a"])(Dt,It,Nt,!1,null,"1a1b2d22",null),Ht=Ot.exports,Lt=i["a"].extend(Ge),Et=i["a"].extend(Ye),Bt=i["a"].extend(st),Mt=i["a"].extend(ut),jt=i["a"].extend(gt),Rt=i["a"].extend(yt),zt=i["a"].extend(Ft),qt=i["a"].extend(Ht);function At(e,t){var n=0,i=!0,s=!1,r=void 0;try{for(var o,a=e[Symbol.iterator]();!(i=(o=a.next()).done);i=!0){var l=o.value;l===t&&n++}}catch(c){s=!0,r=c}finally{try{i||null==a.return||a.return()}finally{if(s)throw r}}return n}var Zt=function(e,t){var n=[],i=[],s=[],r=[],o=[],a=Re.a.lexer(e);o.last=function(){if(this.length>0)return this[this.length-1]};var l=!0,c=!1,u=void 0;try{for(var p,d=a[Symbol.iterator]();!(l=(p=d.next()).done);l=!0){var m=p.value;switch(m.type){case"space":continue;case"hr":var h=new Et({propsData:{pageTheme:t.theme}});n.push(h),0===s.length?i.push(h):o.last().push(h);break;case"heading":var f=new Bt({propsData:{depth:m.depth,pageTheme:t.theme,isTitlePage:t.isTitlePage}});f.$slots.default=[m.text],n.push(f),0===s.length?i.push(f):o.last().push(f);break;case"code":if(0===s.length){var g=new Mt({propsData:{pageWorkAreaHeight:t.pageWorkAreaHeight,precedingComponents:Array.from(i)}});n.push(g),i.push(g)}else{var v=new Mt;n.push(v),o.last().push(v)}break;case"table":var b=new Rt({propsData:{headers:m.header,align:m.align,cells:m.cells,pageTheme:t.theme}});n.push(b),0===s.length?i.push(b):o.last().push(b);break;case"blockquote_start":0!==s.length&&"blockquote_start"===s[s.length-1]||o.push([]),s.push("blockquote_start");break;case"blockquote_end":var w=At(s,"blockquote_start");if(w>1){var C=At(s,"blockquote_end")+1;if(w>C){s.push("blockquote_end");break}w<C&&console.error("blockquote tags error")}var S=0;while(S!==w)"blockquote_start"===s[s.length-1]&&S++,s.pop();var y=void 0;switch(w){case 1:y="note--primary";break;case 2:y="note--secondary";break;case 3:y="note--tertiary";break}var k=new jt({propsData:{noteType:y,components:o.pop(),pageTheme:t.theme,texturesEnabled:t.noteTexturesEnabled,columnCount:t.columnCount}});n.push(k),0===s.length?i.push(k):o.last().push(k);break;case"list_start":r.push(m.ordered?"ordered":"unordered"),s.push("list_start"),o.push([]);break;case"list_item_start":s.push("list_item_start");break;case"list_item_end":var P=0;while(1!==P)"list_item_start"===s[s.length-1]&&P++,s.pop();break;case"list_end":var T=new qt({propsData:{listType:r.pop(),listComponents:o.pop(),pageTheme:t.theme}}),x=0;while(1!==x)"list_start"===s[s.length-1]&&x++,s.pop();n.push(T),0===s.length?i.push(T):o.last().push(T);break;case"html":var _=new zt({propsData:{html:m.text,pageTheme:t.theme,noteTexturesEnabled:t.noteTexturesEnabled,columnCount:t.columnCount}});n.push(_),0===s.length?i.push(_):o.last().push(_);break;case"text":case"paragraph":var F=new Lt({propsData:{text:m.text,pageTheme:t.theme}});n.push(F),0===s.length?i.push(F):o.last().push(F);break}}}catch(I){c=!0,u=I}finally{try{l||null==d.return||d.return()}finally{if(c)throw u}}return{outputComponents:i,createdComponents:n}},Wt=Zt,Gt=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"header header--is-textured",class:e.classList},[n("div",{staticClass:"header__background"}),n("p",{staticClass:"header__number"})])},Vt=[],Jt={name:"PageHeader",props:{pageNumber:{type:Number,required:!0},pageTheme:{type:String,required:!0}},data:function(){return{classList:[this.pageTheme]}},created:function(){this.pageNumber%2===1?this.classList.push("header--is-odd"):this.classList.push("header--is-even")}},Ut=Jt,Kt=(n("3e6c"),Object(w["a"])(Ut,Gt,Vt,!1,null,"74baaa3d",null)),Qt=Kt.exports,Yt=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"footer footer--is-textured",class:e.classList,attrs:{"data-page":e.pageNumber}},[n("div",{staticClass:"footer__background"}),n("p",{staticClass:"footer__number"},[e._v(e._s(e.pageNumber))])])},Xt=[],en={name:"PageFooter",props:{pageNumber:{type:Number,required:!0},pageTheme:{type:String,required:!0}},data:function(){return{classList:[this.pageTheme]}},created:function(){this.pageNumber%2===1?this.classList.push("footer--is-odd"):this.classList.push("footer--is-even")}},tn=en,nn=(n("5166"),Object(w["a"])(tn,Yt,Xt,!1,null,"58678012",null)),sn=nn.exports,rn={name:"PageItem",components:{PageHeader:Qt,PageFooter:sn},props:{pageNumber:{type:Number,required:!0},pageTexturesEnabled:{type:Boolean,required:!0},noteTexturesEnabled:{type:Boolean,required:!0},pageTheme:{type:String,required:!0},textData:{type:String,required:!0},pageOptions:{type:String,required:!1},columnCount:{type:Number,required:!0},isTitlePage:{type:Boolean,required:!0}},data:function(){return{classList:[],headerVisible:!0,footerVisible:!0,createdComponents:[]}},created:function(){if(this.pageTexturesEnabled&&this.classList.push("page--is-textured"),this.classList.push(this.pageTheme),this.pageOptions){var e=this.pageOptions.split(" ");this.classList.push(e),e.includes("title")&&(this.headerVisible=!1,this.footerVisible=!1)}},mounted:function(){this.compileMarkdown()},beforeDestroy:function(){while(this.createdComponents.length>0){var e=this.createdComponents.pop();e.$destroy(),e.$el.remove()}},methods:{countOccurrences:function(e,t){var n=0,i=!0,s=!1,r=void 0;try{for(var o,a=e[Symbol.iterator]();!(i=(o=a.next()).done);i=!0){var l=o.value;l===t&&n++}}catch(c){s=!0,r=c}finally{try{i||null==a.return||a.return()}finally{if(s)throw r}}return n},compileMarkdown:function(){for(var e=0;e<this.createdComponents.length;e++)this.createdComponents[e].$destroy();this.createdComponents=[];var t=this.$el.offsetHeight,n=window.getComputedStyle(this.$el),i=parseFloat(n.paddingTop),s=parseFloat(n.paddingBottom),r=t-i-s,o=Wt(this.textData,{theme:this.pageTheme,noteTexturesEnabled:this.noteTexturesEnabled,columnCount:this.columnCount,isTitlePage:this.isTitlePage,pageWorkAreaHeight:r});this.createdComponents=o.createdComponents;var a=!0,l=!1,c=void 0;try{for(var u,p=this.createdComponents[Symbol.iterator]();!(a=(u=p.next()).done);a=!0){var d=u.value;d.$mount()}}catch(w){l=!0,c=w}finally{try{a||null==p.return||p.return()}finally{if(l)throw c}}var m=!0,h=!1,f=void 0;try{for(var g,v=o.outputComponents[Symbol.iterator]();!(m=(g=v.next()).done);m=!0){var b=g.value;this.$refs.pageContent.appendChild(b.$el)}}catch(w){h=!0,f=w}finally{try{m||null==v.return||v.return()}finally{if(h)throw f}}}}},on=rn,an=(n("946a"),Object(w["a"])(on,Be,Me,!1,null,"d74f3708",null)),ln=an.exports,cn={name:"TheDocument",components:{TheDocumentToolbar:Ne,SpacerItem:Ee,PageItem:ln},data:function(){return{pageSplitRegex:/\\page(?:\[[\w -]*\])?/g,pages:[]}},props:["eventBus"],mounted:function(){var e=this,t=this.$refs.pagesContainer;t.onscroll=pe.a.debounce(function(){var n=parseInt(t.scrollTop/e.pageHeightPx*(100/e.zoom));e.$store.commit("document/setCurrentPageIndex",n)},100),this.eventBus?(this.eventBus.$on("resize",function(){e.checkOverflow()}),this.eventBus.$on("onBeforePrint",function(){e.$store.commit("document/setDefaultZoom"),e.zoomChanged()})):console.error("event bus (Main <-> Document) not instantiated")},computed:Object(c["a"])({},Object(R["b"])({editorCurrentPageIndex:"editor/currentPageIndex",rawCode:"editor/rawCode",pageTexturesEnabled:"document/pageTexturesEnabled",noteTexturesEnabled:"document/noteTexturesEnabled",oldZoom:"document/oldZoom",zoom:"document/zoom",theme:"document/theme",pageHeightPx:"document/pageHeightPx",pageOffsetPx:"document/pageOffsetPx"})),watch:{rawCode:function(){this.createPages()},pageTexturesEnabled:function(){this.createPages()},noteTexturesEnabled:function(){this.createPages()},theme:function(){this.createPages()}},methods:{createPages:function(){var e=this.getPagesOptions(this.rawCode),t=this.rawCode.split(this.pageSplitRegex),n=t.length-1;while(n<this.pages.length)this.pages.pop();var s=1;while(s<t.length){var r=1,o=!1;if(e[s-1]){var a=e[s-1].match(/columns-([0-9])/);a&&(r=Number(a[1])),o=!!e[s-1].match(/title/)}var l={pageNumber:s,pageTexturesEnabled:this.pageTexturesEnabled,noteTexturesEnabled:this.noteTexturesEnabled,pageOptions:e[s-1],pageTheme:this.theme,textData:t[s].substring(0,t[s].length),columnCount:r,isTitlePage:o};l.key=JSON.stringify(l),this.pages[s-1]&&this.pages[s-1].key===l.key||i["a"].set(this.pages,s-1,l),s++}this.checkOverflow()},getPagesOptions:function(e){var t,n=/\\page(?:\[([\w -]*)\])?/g,i=[];do{t=n.exec(e),t&&(t[1]?i.push(t[1]):i.push(null))}while(t);return i},zoomChanged:function(){var e=this.$refs.pagesContainer,t=this.$refs.pages;this.oldZoom>this.zoom&&e.scrollTo(0,this.zoom*e.scrollTop/this.oldZoom),100===this.zoom?t.style["transform"]="":t.style["transform"]="scale("+(this.zoom/100).toFixed(2)+")",this.zoom>this.oldZoom&&e.scrollTo(0,this.zoom*e.scrollTop/this.oldZoom),this.checkOverflow()},checkOverflow:function(){var e=this.$refs.pagesContainer;e&&(e.clientWidth<e.scrollWidth?e.classList.add("document__pages-container--overflow-fix"):e.classList.remove("document__pages-container--overflow-fix"))},scrollToCursor:function(){this.$refs.pagesContainer.scrollTo(0,(this.pageHeightPx*this.editorCurrentPageIndex+this.pageOffsetPx)*(this.zoom/100))},getPDF:function(){window.print()}}},un=cn,pn=(n("2300"),Object(w["a"])(un,ke,Pe,!1,null,null,null)),dn=pn.exports,mn={name:"App",components:{TheEditor:ye,TheDocument:dn},data:function(){return{documentEventBus:new i["a"]}},created:function(){window.addEventListener("resize",this.windowResized),window.onbeforeprint=this.onBeforePrint},methods:{splitDrag:function(){this.documentEventBus.$emit("resize")},windowResized:function(){this.documentEventBus.$emit("resize")},onBeforePrint:function(){this.documentEventBus.$emit("onBeforePrint")}}},hn=mn,fn=(n("5c0b"),Object(w["a"])(hn,s,r,!1,null,null,null)),gn=fn.exports,vn=n("75fc"),bn={namespaced:!0,state:{rawCode:"",currentPageIndex:0,pageBreakIndexes:[]},getters:{rawCode:function(e){return e.rawCode},currentPageIndex:function(e){return e.currentPageIndex},pageBreakIndexes:function(e){return e.pageBreakIndexes},pageCount:function(e){return e.pageBreakIndexes.length}},mutations:{setRawCode:function(e,t){e.rawCode=t},setCurrentPageIndex:function(e,t){e.currentPageIndex=t},setPageBreakIndexes:function(e,t){var n;e.pageBreakIndexes=[],(n=e.pageBreakIndexes).push.apply(n,Object(vn["a"])(t))}}},wn=bn,Cn={namespaced:!0,state:{primaryNoteSnippet:"> ##### Header\n>\n> Example text.\n\n",secondaryNoteSnippet:">> ##### Header\n>>\n>> Example text.\n\n",tertiaryNoteSnippet:">>> ##### Header\n>>>\n>>> Example text.\n\n",newspaperNoteSnippet:'<pre markdown="1" class="prop prop--newspaper">\n# headline\n\narticle_content\n</pre>\n\n',handwrittenNoteSnippet:'<pre markdown="1" class="prop prop--handwritten">\nHandwritten note\n\n<p style="float: right;">John Doe</p>\n</pre>\n\n',cthulhuStatTableSnippet:'<pre markdown="1" class="stat-block stat-block--cthulhu">\n|JOSH WINSCOTT, *damned by his legacy*|\n|-|\n\n||||||\n|-|-|-|-|-|\n|**STR** 00|**CON** 00|**SIZ** 00|**DEX** 00|**INT** 00|\n|**APP** 00|**POW** 00|**EDU** 00|**SAN** 00|**HP** 00|\n|**DB** 0|**Build** 0|**Move** 0|**MP** 00|-|\n\n|*Combat*||\n|-|-|\n|Knife|00% (00/00), damage **0**|\n|Dodge|00% (00/00)|\n\n|*Skills*|\n|-|\n|Climb 00%, Credit Rating 00%, Fast Talk 00%, History 00%, Jump 00%, Library Use 00%, Occult 00%.|\n|**Languages:** English 00%, French 00%.|\n</pre>\n\n',dndStatTableSnippet:'<pre markdown="1" class="stat-block stat-block--dnd">\n# Animated armor\n*Medium construct, unaligned*\n___\n* **Armor Class 18** (natural armor)\n* **Hit Points 33** (6d8 + 6)\n* **Speed** 25 ft.\n___\n|STR|DEX|CON|INT|WIS|CHA|\n|:-:|:-:|:-:|:-:|:-:|:-:|\n|14 (+2)|11 (+0)|13 (+1)|1 (-5)|3 (-4)|1 (-5)|\n\n___\n* **Damage Immunities** poison, psychic\n* **Condition Immunities** blinded, charmed, deafened, exhaustion, frightened, paralyzed, petrified, poisoned\n* **Senses** blindsight 60 ft. (blind beyond this radius), passive Perception 6\n* **Languages** ---\n* **Challenge** 1 (200XP)\n___\n***Antimagic Susceptibility.*** The armor is incapacitated while in the area of an antimagic field. If targeted by dispel magic, the armor must succeed on a Constituion saving throw against the caster\'s spell save DC or fall unconscious for 1 minute.\n\n***False Appearance***. While the armor remains motionless, it is indistinguishable from a normal suit of armor.\n\n## Actions\n\n***Multiattack.*** The armor makes two melee attacks.\n\n***Slam.*** *Melee Weapon Attack:* +4 to hit, reach 5ft., one target. *Hit:* 5 (1d6 + 2) bludgeoning damage.\n</pre>\n\n',tableSnippet:"|Header 1|Header 2|Header 3|\n|-|:-:|-:|\n|aaa|bbb|ccc|\n|aaa|bbb|ccc|\n\n",dndCustomTableSnippet:'<pre markdown="1" class="custom-table custom-table--dnd">\n|Header 1|Header 2|Header 3|\n|-|:-:|-:|\n|aaa|bbb|ccc|\n|aaa|bbb|ccc|\n</pre>\n\n',pageSnippet:"\\page\n\n",twoColumnPageSnippet:"\\page[columns-2]\n\n",threeColumnPageSnippet:"\\page[columns-3]\n\n",titlePageSnippet:'\\page[title]\n\n<div style="height: 350px;"></div>\n\n# Title\n\n##### Description\n\n',relativeImageSnippet:'<image src="https://github.com/adam-p/markdown-here/raw/master/src/common/images/icon48.png"/>\n\n',absoluteImageSnippet:'<img class="image image--absolute" style="bottom: 1cm; right: 1cm;" src="https://github.com/adam-p/markdown-here/raw/master/src/common/images/icon48.png"/>\n\n',fullPageImageSnippet:'<img class="image image--fullpage" src="https://i.imgur.com/PNpQjCA.jpg"/>\n\n',columnBreakSnippet:"```\n```\n\n",wideBlockSnippet:'<pre markdown="1" class="page-wide-block">\nwide_block\n</pre>\n\n',verticalSpacingSnippet:'<div style="height: 350px;"/>\n\n',customTitlePageFontSnippet:'<style>\n@font-face {\n\tfont-family: "titlePage";\n\tfont-style: normal;\n\tfont-weight: 400;\n\tsrc: local("Arial");\n}\n</style>\n\n',customHeadersFontSnippet:'<style>\n@font-face {\n\tfont-family: "headers";\n\tfont-style: normal;\n\tfont-weight: 700;\n\tsrc: local("Arial");\n}\n</style>\n\n',customNoteHeadersFontSnippet:'<style>\n@font-face {\n\tfont-family: "headers-blockquotes";\n\tfont-style: normal;\n\tfont-weight: 700;\n\tsrc: local("Arial");\n}\n</style>\n\n',customRegularTextFontSnippet:'<style>\n@font-face {\n\tfont-family: "regular-text";\n\tfont-style: normal;\n\tfont-weight: 400;\n\tsrc: local("Arial");\n}\n</style>\n\n',customNewspaperHeadersFontSnippet:'<style>\n@font-face {\n\tfont-family: "newspaper-headers";\n\tfont-style: normal;\n\tfont-weight: 700;\n\tsrc: local("Arial");\n}\n</style>\n\n',customNewspaperTextFontSnippet:'<style>\n@font-face {\n\tfont-family: "newspaper-text";\n\tfont-style: normal;\n\tfont-weight: 400;\n\tsrc: local("Arial");\n}\n</style>\n\n',customHandwritingFontSnippet:'<style>\n@font-face {\n\tfont-family: "handwriting";\n\tfont-style: normal;\n\tfont-weight: 400;\n\tsrc: local("Arial");\n}\n</style>\n\n'},getters:{primaryNoteSnippet:function(e){return e.primaryNoteSnippet},secondaryNoteSnippet:function(e){return e.secondaryNoteSnippet},tertiaryNoteSnippet:function(e){return e.tertiaryNoteSnippet},newspaperNoteSnippet:function(e){return e.newspaperNoteSnippet},handwrittenNoteSnippet:function(e){return e.handwrittenNoteSnippet},phbNoteSnippet:function(e){return e.phbNoteSnippet},cthulhuStatTableSnippet:function(e){return e.cthulhuStatTableSnippet},dndStatTableSnippet:function(e){return e.dndStatTableSnippet},tableSnippet:function(e){return e.tableSnippet},dndCustomTableSnippet:function(e){return e.dndCustomTableSnippet},pageSnippet:function(e){return e.pageSnippet},twoColumnPageSnippet:function(e){return e.twoColumnPageSnippet},threeColumnPageSnippet:function(e){return e.threeColumnPageSnippet},titlePageSnippet:function(e){return e.titlePageSnippet},relativeImageSnippet:function(e){return e.relativeImageSnippet},absoluteImageSnippet:function(e){return e.absoluteImageSnippet},fullPageImageSnippet:function(e){return e.fullPageImageSnippet},columnBreakSnippet:function(e){return e.columnBreakSnippet},wideBlockSnippet:function(e){return e.wideBlockSnippet},verticalSpacingSnippet:function(e){return e.verticalSpacingSnippet},customTitlePageFontSnippet:function(e){return e.customTitlePageFontSnippet},customHeadersFontSnippet:function(e){return e.customHeadersFontSnippet},customNoteHeadersFontSnippet:function(e){return e.customNoteHeadersFontSnippet},customRegularTextFontSnippet:function(e){return e.customRegularTextFontSnippet},customNewspaperHeadersFontSnippet:function(e){return e.customNewspaperHeadersFontSnippet},customNewspaperTextFontSnippet:function(e){return e.customNewspaperTextFontSnippet},customHandwritingFontSnippet:function(e){return e.customHandwritingFontSnippet}}},Sn=Cn,yn=10,kn=100,Pn=150,Tn=50,xn={namespaced:!0,state:{pageTexturesEnabled:!0,noteTexturesEnabled:!0,oldZoom:kn,zoom:kn,theme:"theme--default",currentPageIndex:0,pageHeightPx:1141.42,pageOffsetPx:40},getters:{pageTexturesEnabled:function(e){return e.pageTexturesEnabled},noteTexturesEnabled:function(e){return e.noteTexturesEnabled},oldZoom:function(e){return e.oldZoom},zoom:function(e){return e.zoom},theme:function(e){return e.theme},currentPageIndex:function(e){return e.currentPageIndex},currentPageNumber:function(e){return e.currentPageIndex+1},pageHeightPx:function(e){return e.pageHeightPx},pageOffsetPx:function(e){return e.pageOffsetPx}},actions:{setZoom:function(e,t){e.commit("setZoom",t)},zoomIn:function(e){e.state.zoom+yn<=Pn&&e.commit("setZoom",e.state.zoom+yn)},zoomOut:function(e){e.state.zoom-yn>=Tn&&e.commit("setZoom",e.state.zoom-yn)}},mutations:{togglePageTextures:function(e){e.pageTexturesEnabled=!e.pageTexturesEnabled},toggleNoteTextures:function(e){e.noteTexturesEnabled=!e.noteTexturesEnabled},setZoom:function(e,t){e.oldZoom=e.zoom,e.zoom=t},setDefaultZoom:function(e){e.oldZoom=e.zoom,e.zoom=kn},setTheme:function(e,t){e.theme=t},setCurrentPageIndex:function(e,t){e.currentPageIndex=t}}},_n=xn,Fn={namespaced:!0,state:{fileId:void 0,fileName:void 0,fileParentId:void 0},getters:{fileId:function(e){return e.fileId},fileName:function(e){return e.fileName},fileParentId:function(e){return e.fileParentId}},mutations:{setFileId:function(e,t){e.fileId=t},setFileName:function(e,t){e.fileName=t},setFileParentId:function(e,t){e.fileParentId=t}}},In=Fn;i["a"].use(R["a"]);var Nn=new R["a"].Store({modules:{editor:wn,editorSnippets:Sn,document:_n,filepicker:In},strict:!0}),$n=n("9b40"),Dn=n.n($n);n("15f5");i["a"].use(Dn.a),i["a"].config.productionTip=!1,new i["a"]({store:Nn,render:function(e){return e(gn)}}).$mount("#app")},"5a77":function(e,t,n){},"5c0b":function(e,t,n){"use strict";var i=n("5e27"),s=n.n(i);s.a},"5e27":function(e,t,n){},"5fb2":function(e,t,n){},"61fa":function(e,t,n){"use strict";var i=n("dea7"),s=n.n(i);s.a},"6ce8":function(e,t,n){},"7bbe":function(e,t,n){"use strict";var i=n("23e0"),s=n.n(i);s.a},"7dfb":function(e,t,n){},"82ae":function(e,t,n){},"87c0":function(e,t,n){},"946a":function(e,t,n){"use strict";var i=n("1c15"),s=n.n(i);s.a},"9c65":function(e,t,n){"use strict";var i=n("c5ee"),s=n.n(i);s.a},ae7e:function(e,t,n){"use strict";var i=n("7dfb"),s=n.n(i);s.a},b14e:function(e,t,n){},b3d6:function(e,t,n){},bcee:function(e,t,n){"use strict";var i=n("4da2"),s=n.n(i);s.a},c5ee:function(e,t,n){},cd41:function(e,t,n){},d520:function(e,t,n){"use strict";var i=n("6ce8"),s=n.n(i);s.a},d83f:function(e,t,n){"use strict";var i=n("34c7"),s=n.n(i);s.a},dc60:function(e,t,n){"use strict";var i=n("1b17"),s=n.n(i);s.a},dd3d:function(e,t,n){"use strict";var i=n("5389"),s=n.n(i);s.a},dea7:function(e,t,n){},e8fc:function(e,t,n){"use strict";var i=n("82ae"),s=n.n(i);s.a},e929:function(e,t,n){},f3e4:function(e,t,n){"use strict";var i=n("e929"),s=n.n(i);s.a}});
//# sourceMappingURL=app.11dc319f.js.map